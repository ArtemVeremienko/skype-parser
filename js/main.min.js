!function(){"use strict";function e(e){return e.displayName?s(e.displayName):a(e.id)}function t(t){t.preventDefault();var n=parseInt(t.target.getAttribute("data-conv"),10),r=document.getElementById("messages");r.innerHtml="",r.textContent="",document.getElementById("selected-conversation-header").textContent=e(window.Skype.conversations[n]);for(var o=window.Skype.conversations[n]&&window.Skype.conversations[n].MessageList?window.Skype.conversations[n].MessageList:[],i=o.length-1;i>=0;i--)if(""!==o[i].content){var l=document.createElement("li");l.className="message",l.setAttribute("id",o[i].id);var c=document.createElement("div");l.appendChild(c);var d=document.createElement("span");d.className="author",d.textContent=a(o[i].from),c.appendChild(d);var m=document.createElement("span");m.className="timestamp",m.textContent=new Date(o[i].originalarrivaltime).toLocaleString(),c.appendChild(m);var p=document.createElement("div");if(p.className="message-body",o[i].content.includes("Picture")){var u=o[i].content.match(/0[\w-]*/)[0],g=o[i].content.match(/png|gif|jpe?g/i)[0],v=document.createElement("img");v.className="message-image",v.setAttribute("src",`media/${u}.1.${g}`),p.appendChild(v)}else p.innerHTML=s(o[i].content);l.appendChild(p),r.appendChild(l)}}function n(e,t){document.getElementById(e).textContent=t}function a(e){return e.replace(/^8:/,"")}function s(e){return e.replace(/&apos;/g,"'").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")}function r(e,t){for(var n=document.getElementsByClassName(e),a=0;a<n.length;a++)n[a].style.display=t?"block":"none"}document.getElementById("btnLoad").addEventListener("click",function(){var s,o,i;"function"==typeof window.FileReader?(s=document.getElementById("fileinput"))&&s.files?s.files[0]?(document.getElementById("progress").style.display="block",o=s.files[0],(i=new FileReader).onload=function(s){var o=s.target.result;!function(s){if(s&&s.userId&&s.conversations&&s.exportDate){var o=new Date(s.exportDate),i=s.conversations.filter(function(e){return e.id&&"ALL"!==e.id&&!/@cast\.skype$/.test(e.id)&&e.MessageList&&e.MessageList.length});n("hdr-user",a(s.userId)),n("hdr-exported",o.toLocaleString()),n("hdr-stats",i.length+" conversations"),function(n){for(var a=document.getElementById("conversations"),s=0;s<n.length;s++){var r=document.createElement("li");r.className="conversations";var o=document.createElement("a");o.setAttribute("href","#"),o.setAttribute("data-conv",s),o.className="conv-link",o.textContent=e(n[s]),r.appendChild(o);var i=document.createElement("div");r.appendChild(i);var l=document.createElement("span");l.className="messageCount",l.textContent=n[s].MessageList.length+" messages",i.appendChild(l);var c=n[s].properties&&n[s].properties.lastimreceivedtime?n[s].properties.lastimreceivedtime:null;if(c){var d=document.createElement("span");d.className="timestamp-conv",d.textContent="Last from: "+new Date(c).toLocaleString(),i.appendChild(d)}a.appendChild(r)}var m=document.getElementsByClassName("conv-link");for(s=0;s<m.length;s++)m[s].addEventListener("click",t)}(i),window.Skype={},window.Skype.conversations=i,r("step-1",!1),r("step-2",!0)}else alert("Sorry, we are unable to load this file")}(JSON.parse(o))},i.readAsText(o,"utf8")):alert("Please select a file before clicking 'Load'"):alert("This browser doesn't seem to support the 'files' property of file inputs."):alert("The file API isn't supported on this browser. Please use a more modern browser.")}),r("step-2",!1),r("step-1",!0)}();